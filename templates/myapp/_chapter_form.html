{% if chapter %}
<form hx-put="{% url 'edit_chapter' chapter.id %}" hx-target="#chapter-{{ chapter.id }}" class="p-4">
  <h3 class="text-lg font-semibold mb-4">Edit Chapter</h3>
{% else %}
<form hx-post="{% url 'add_chapter' subject.id %}" hx-target="#chapters" hx-swap="beforeend" class="p-4">
  <h3 class="text-lg font-semibold mb-4">Add New Chapter</h3>
{% endif %}

  <div class="form-group">
    <label class="form-label" for="title">Chapter Title</label>
    <input 
      type="text" 
      name="title" 
      id="title" 
      class="form-input" 
      value="{{ chapter.title|default:'' }}"
      required
      autofocus
    >
  </div>

  <div class="flex justify-end gap-2 mt-4">
    <button type="button" class="btn btn-secondary" onclick="this.closest('form').remove()">
      Cancel
    </button>
    <button type="submit" class="btn btn-primary">
      {{ chapter|yesno:"Save,Add" }} Chapter
    </button>
  </div>
</form>